# 模板编译篇

虚拟`DOM`存在的必要条件是得先有`VNode`，那么`VNode`又是从哪儿来的呢？

把用户写的模板进行编译，就会产生`VNode`

`Vue`会把用户在`<template></template>`标签中写的类似于原生`HTML`的内容进行编译

经过一系列的逻辑处理生成渲染函数，也就是`render`函数

而`render`函数会将模板内容生成对应的`VNode`

用户在`<template></template>`标签中写的类似于原生`HTML`的内容进行编译，把原生`HTML`的内容找出来，再把非原生`HTML`找出来，经过一系列的逻辑处理生成渲染函数，也就是`render`函数的这一段过程称之为模板编译过程。

## 内部流程

### 抽象语法树AST

[在线测试AST](https://astexplorer.net/#)

### 流程

将一堆字符串模板解析成抽象语法树`AST`后，我们就可以对其进行各种操作处理了，处理完后用处理后的`AST`来生成`render`函数

1. 模板解析阶段：将一堆模板字符串用正则等方式解析成抽象语法树`AST`；
2. 优化阶段：遍历`AST`，找出其中的静态节点，并打上标记；
3. 代码生成阶段：将`AST`转换成渲染函数；

模板解析器`src/compiler/parser/index.js`

